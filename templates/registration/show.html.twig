{% extends 'base.html.twig' %}

{% block title %}
    Détails de l'utilisateur
{% endblock %}

{% block body %}
    <div class="container mt-4">
        <div class="card">
            <div class="card-header">
                <h2 class="font-weight-bold mb-0">{{ user.collaborateur.prenom }} {{ user.collaborateur.nom }}</h2>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">Nom d'utilisateur :</dt>
                    <dd class="col-sm-9">{{ user.username }}</dd>

                    <dt class="col-sm-3">Rôles :</dt>
                    <dd class="col-sm-9">
                        {% if user.roles is not empty %}
                            <ul>
                                {% for role in user.roles %}
                                    <li>{{ role }}</li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            Aucun rôle défini.
                        {% endif %}
                    </dd>
                </dl>
                
                {# Add buttons here #}
                <div class="mt-3">
                    {# Button to upgrade user roles to ROLE_SUPER_ADMIN #}
                    <button class="btn btn-danger" onclick="confirmUpgrade()">Définir comme SUPER ADMIN</button>

                    {# Button to redirect to edit.html.twig page #}
                    <a href="{{ path('app_edit_user', {'id': user.id}) }}" class="btn btn-primary">Modifier</a>
                </div>
            </div>
        </div>
    </div>

    {# JavaScript code for confirmation alert #}
    <script>
        function confirmUpgrade() {
            var confirmation = confirm("Etes vous sure de vouloir augmenter les droits de cette utilisateur au rang de SUPER ADMIN ?");
            if (confirmation) {
                // Add logic to trigger the upgrade process (e.g., via AJAX or form submission)
            }
        }
    </script>
{% endblock %}
